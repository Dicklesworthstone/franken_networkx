{
  "schema_version": "1.0.0",
  "artifact": "structured_test_log",
  "description": "Canonical telemetry schema for unit/property/differential/e2e/fuzz/perf outputs with deterministic replay-critical metadata.",
  "supported_schema_versions": [
    "1.0.0"
  ],
  "required_fields": [
    "schema_version",
    "run_id",
    "ts_unix_ms",
    "crate_name",
    "suite_id",
    "packet_id",
    "test_name",
    "test_id",
    "test_kind",
    "mode",
    "environment",
    "env_fingerprint",
    "duration_ms",
    "replay_command",
    "artifact_refs",
    "forensic_bundle_id",
    "forensics_bundle_index",
    "hash_id",
    "status"
  ],
  "replay_critical_fields": [
    "run_id",
    "suite_id",
    "test_id",
    "mode",
    "fixture_id",
    "seed",
    "environment",
    "env_fingerprint",
    "duration_ms",
    "replay_command",
    "artifact_refs",
    "forensic_bundle_id",
    "forensics_bundle_index.bundle_id",
    "forensics_bundle_index.run_id",
    "forensics_bundle_index.test_id",
    "forensics_bundle_index.bundle_hash_id",
    "forensics_bundle_index.replay_ref",
    "hash_id",
    "reason_code",
    "failure_repro.reproduction_command",
    "failure_repro.artifact_hash_id",
    "failure_repro.forensics_link"
  ],
  "test_kind_values": [
    "unit",
    "property",
    "differential",
    "e2e",
    "fuzz",
    "perf"
  ],
  "status_rules": {
    "passed": {
      "failure_repro": "must_be_absent",
      "reason_code": "optional_non_empty_if_present"
    },
    "failed": {
      "failure_repro": "required",
      "reason_code": "required_non_empty",
      "failure_repro_requirements": [
        "failure_message",
        "reproduction_command",
        "artifact_hash_id",
        "seed_or_fixture_id"
      ]
    },
    "skipped": {
      "failure_repro": "must_be_absent",
      "reason_code": "required_non_empty"
    }
  },
  "e2e_rules": {
    "required_when_test_kind_equals": "e2e",
    "required_field": "e2e_step_traces",
    "required_constraints": [
      "e2e_step_traces must be non-empty for e2e test_kind",
      "each step run_id/test_id/forensic_bundle_id/replay_command must match parent log",
      "step duration_ms must equal end_unix_ms - start_unix_ms",
      "step_id values must be unique per log"
    ]
  },
  "schema_refs": {
    "e2e_step_trace_schema": "artifacts/conformance/schema/v1/e2e_step_trace_schema_v1.json",
    "forensics_bundle_index_schema": "artifacts/conformance/schema/v1/forensics_bundle_index_schema_v1.json"
  }
}
